<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Xing-Chuan , 纪行川,Blog ,Web developer" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="工作、生活记录">
<meta property="og:type" content="website">
<meta property="og:title" content="行川草庐">
<meta property="og:url" content="http://www.jixingchuan.com/index.html">
<meta property="og:site_name" content="行川草庐">
<meta property="og:description" content="工作、生活记录">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="行川草庐">
<meta name="twitter:description" content="工作、生活记录">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.jixingchuan.com/"/>





  <title> 行川草庐 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">行川草庐</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">挖掘新鲜有趣的事物</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-firefox"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-database"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-id-card-o"></i> <br />
            
            博主
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/08/15/JavaScript之正则表达式入门-基本特性与应用案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/15/JavaScript之正则表达式入门-基本特性与应用案例/" itemprop="url">
                  JavaScript之正则表达式入门(基本语法与应用案例)
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T09:20:09+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/categories/" itemprop="url" rel="index">
                    <span itemprop="name">categories</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><p>正则表达式的实现最早来自 Unix 系统, 并不是 JS 一家独有, 而是一套通用语法, 各家实现略有不同.</p>
<p>虽说目前 JS 技术发展迅速, 但很多部分都是借鉴其他语言的特性和框架发展而来的.</p>
<p>很多人对正则头痛, 常常写匹配时忘记语法如何写了. 😂</p>
<p>复杂度较高的的组合使用, 阅读性也很低, 例如 <code>/^[-a-z0-9~!$%^&amp;*_=+}{\&#39;?]+(\.[-a-z0-9~!$%^&amp;*_=+}{\&#39;?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i</code> , 这是一段邮箱认证的正则.</p>
<p>正则出现的频率并不高, 出现时却有<code>尚方宝剑</code>的效果, 能一招见效, 达成目的, 正则是我们拿来精准匹配和替换的利器.</p>
<p>本篇旨在探索基本语法在实际中的应用.</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>任意一个字符,不包括 <code>\n\r</code></td>
</tr>
<tr>
<td>^</td>
<td>以什么开始</td>
</tr>
<tr>
<td>$</td>
<td>以什么结束</td>
</tr>
<tr>
<td>*</td>
<td>元字符出现0或多次</td>
</tr>
<tr>
<td>+</td>
<td>元字符出现1或多次</td>
</tr>
<tr>
<td>?</td>
<td>元字符出现0或1次</td>
</tr>
<tr>
<td>{n}</td>
<td>出现n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>出现最少n次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>出现n到m次之间</td>
</tr>
<tr>
<td>[  ]</td>
<td>匹配<code>\n</code>以外的单字字符</td>
</tr>
<tr>
<td>[ab]</td>
<td>匹配a或b</td>
</tr>
<tr>
<td>[a-d]</td>
<td>匹配一个a到d之间的小写字母</td>
</tr>
<tr>
<td>%[^a-zA-Z]%</td>
<td>两个百分号之间不应该出现字母, <code>^</code></td>
</tr>
<tr>
<td>\b</td>
<td>单词边界</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配一个空白字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配一个非空白字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配一个非特殊字符, 包括_</td>
</tr>
<tr>
<td>\W</td>
<td>匹配一个特殊字符</td>
</tr>
<tr>
<td>\</td>
<td>转义字符, 正则语法中<code>^.$()¦*+?{}\</code>如需要匹配字符串中对应字符需要使用转义字符<code>\</code></td>
</tr>
<tr>
<td>g</td>
<td>全局替换</td>
</tr>
<tr>
<td>i</td>
<td>忽略大小写</td>
</tr>
</tbody>
</table>
<h2 id="相关属性和方法"><a href="#相关属性和方法" class="headerlink" title="相关属性和方法"></a>相关属性和方法</h2><h3 id="正则实例的属性"><a href="#正则实例的属性" class="headerlink" title="正则实例的属性"></a>正则实例的属性</h3><p><img src="http://upload-images.jianshu.io/upload_images/4434201-4c96ce1a603b302a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>实例拥有5个属性:</p>
<ul>
<li>global：是否全局搜索，默认是false</li>
<li>ignoreCase：是否大小写敏感，默认是false</li>
<li>multiline：多行搜索，默认值是false</li>
<li>lastIndex：是当前表达式模式首次匹配内容中最后一个字符的下一个位置，每次正则表达式成功匹配时，lastIndex属性值都会随之改变。</li>
<li>source：正则表达式的文本字符串</li>
</ul>
<h3 id="正则原型的方法"><a href="#正则原型的方法" class="headerlink" title="正则原型的方法"></a>正则原型的方法</h3><p>我们可以用下面的方法创造一个正则表达式,</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// new 一个</span></div><div class="line"><span class="keyword">let</span> pattern1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'abc'</span>);</div><div class="line"><span class="comment">// 字面量生成</span></div><div class="line"><span class="keyword">let</span> pattern2 = <span class="regexp">/^\S/</span>;</div></pre></td></tr></table></figure>
<p>这两种创造正则表达式的效果是相同的.</p>
<p>可以用 new 来生成实例, 可见 RegExp 是一个构造函数, 那我们就去他的原型上看看都有哪些方法可用.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">RegExp</span>)</div><div class="line"><span class="comment">// [object Function]</span></div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-87c2a40e83bbae47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>我们可以看到, 有下面3个可用的方法:</p>
<ul>
<li>test</li>
<li>exec</li>
<li>compile</li>
</ul>
<h4 id="test"><a href="#test" class="headerlink" title="test()"></a>test()</h4><p>test 用于匹配字符串中是否存在符合正则匹配规则的字符, 存在返回 true, 不存在返回 false.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> part = <span class="regexp">/o/g</span>;</div><div class="line"><span class="keyword">let</span> ret = part.test(<span class="string">'Hello World'</span>);</div><div class="line"><span class="built_in">console</span>.log(ret);</div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure>
<h4 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h4><p>exec 用于匹配字符串中是否存在符合正则匹配规则的字符, 存在返回一个数组, 包含匹配到的字符, 不存在返回 null .</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> part = <span class="regexp">/o/g</span>;</div><div class="line"><span class="keyword">let</span> ret = part.exec(<span class="string">'Hello World'</span>);</div><div class="line"><span class="built_in">console</span>.log(ret);</div><div class="line"><span class="comment">// ["o", index: 4, input: "Hello World"]</span></div></pre></td></tr></table></figure>
<p>如果全局匹配, 多次运行, 会返回后面新匹配到的索引.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> part = <span class="regexp">/e/g</span>;</div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">result=part.exec(<span class="string">"The best things in life are free"</span>);</div><div class="line"><span class="built_in">console</span>.log(result);</div><div class="line">&#125; <span class="keyword">while</span> (result!=<span class="literal">null</span>)</div><div class="line"><span class="comment">// ["e", index: 2, input: "The best things in life are free"]</span></div><div class="line"><span class="comment">// ["e", index: 5, input: "The best things in life are free"]</span></div><div class="line"><span class="comment">// ["e", index: 22, input: "The best things in life are free"]</span></div><div class="line"><span class="comment">// ["e", index: 26, input: "The best things in life are free"]</span></div><div class="line"><span class="comment">// ["e", index: 30, input: "The best things in life are free"]</span></div><div class="line"><span class="comment">// ["e", index: 31, input: "The best things in life are free"]</span></div></pre></td></tr></table></figure>
<h4 id="compile"><a href="#compile" class="headerlink" title="compile()"></a>compile()</h4><p>compile 用于替换正则表达式的匹配规则, 编译正则为接近计算机底层编码格式.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> part = <span class="regexp">/e/</span>;</div><div class="line"></div><div class="line"><span class="comment">// 方法 1</span></div><div class="line">part.compile(<span class="string">'abc'</span>,<span class="string">'g'</span>);</div><div class="line"><span class="built_in">console</span>.log(part);</div><div class="line"><span class="comment">// /abc/g</span></div><div class="line"></div><div class="line"><span class="comment">// 方法 2</span></div><div class="line">part.compile(<span class="regexp">/def/</span>);</div><div class="line"><span class="built_in">console</span>.log(part);</div><div class="line"><span class="comment">// /def/</span></div></pre></td></tr></table></figure>
<p>到这里有人可能有疑问了, 这和我重新赋值一个新的正则表达式有什么区别?</p>
<p>区别还是有的, 我们使用的编程语言是经由机器码多次编译而来的, compile 可以编译为便于计算机理解的代码, 提升运行速度.</p>
<p>简单的匹配时没有明显速度差异的, 如果是大数据, 数据体量极大, 正则的执行速度差异就体现出来了.</p>
<h3 id="字符串和正则相关的方法"><a href="#字符串和正则相关的方法" class="headerlink" title="字符串和正则相关的方法"></a>字符串和正则相关的方法</h3><p>字符串原型上有4个方法和正则相关联.</p>
<ul>
<li>String.prototype.search</li>
<li>String.prototype.match</li>
<li>String.prototype.replace</li>
<li>String.prototype.split</li>
</ul>
<h4 id="String-prototype-search"><a href="#String-prototype-search" class="headerlink" title="String.prototype.search"></a>String.prototype.search</h4><p>search 用于检索字符串的制定子字符串, 返回索引位置(Number类型), 检索不成功返回 <code>-1</code>, 参数可用字符串与正则表达式匹配.</p>
<p>不能全局检索, 只能匹配一次, 忽略 <code>g</code>, 匹配成功立即返回.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'Hello World'</span>;</div><div class="line"><span class="built_in">console</span>.log(str.search(<span class="string">'H'</span>)); <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(str.search(<span class="string">'h'</span>)); <span class="comment">// -1</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(str.search(<span class="regexp">/World/</span>)); <span class="comment">// 6</span></div></pre></td></tr></table></figure>
<h4 id="String-prototype-match"><a href="#String-prototype-match" class="headerlink" title="String.prototype.match"></a>String.prototype.match</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'Hello World'</span>;</div></pre></td></tr></table></figure>
<p>单次匹配, 返回一个数组, 包含 index 属性 和 input 属性, index 为匹配到的索引位置, input 为被匹配的父字符串, 返回值与 exec 相同.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-2285affda4cfb35d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>全局匹配, 返回一个数组, 不包含 index 属性 和 input 属性, 匹配到的子字符串会以数组形式放置, 返回值与 exec 不同.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-099a43019f059498.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="String-prototype-replace"><a href="#String-prototype-replace" class="headerlink" title="String.prototype.replace"></a>String.prototype.replace</h4><p>replace 方法并不改变字符串本身, 而是返回替换后的新字符串.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'Hello World'</span>;</div><div class="line">str.replace(<span class="string">'o'</span>,<span class="string">'aaa'</span>) <span class="comment">// "Hellaaa World"</span></div><div class="line"></div><div class="line">str.replace(<span class="regexp">/o/gi</span>, <span class="number">0</span>) <span class="comment">// "Hell0 W0rld"</span></div></pre></td></tr></table></figure>
<p>replace 的第二个参数也可以是函数, 参数有如下这些</p>
<p>| 参数       | 代表的数值                                                                                                      |<br>| match      | 匹配的子字符串                                                                                                  |<br>| p1,p2, … | 匹配的每个字符串                                                                                                |<br>| offset     | 匹配到的子字符串在原字符串中的偏移量。（比如，如果原字符串是“abcd”，匹配到的子字符串是“bc”，那么这个参数将是1） |<br>| string     | 被匹配的原字符串                                                                                                |</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match, p1, p2, p3, offset, string</span>) </span>&#123;</div><div class="line">  <span class="comment">// p1 is nondigits, p2 digits, and p3 non-alphanumerics</span></div><div class="line">  <span class="keyword">return</span> [p1, p2, p3].join(<span class="string">' - '</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> newString = <span class="string">'abc12345#$*%'</span>.replace(<span class="regexp">/([^\d]*)(\d*)([^\w]*)/</span>, replacer); <span class="comment">// 'abc - 12345 - #$*%'：</span></div></pre></td></tr></table></figure>
<p>已字符串作为参数, 可以使用以下特殊语句:</p>
<table>
<thead>
<tr>
<th>特殊字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$$</code></td>
<td>插入一个 “$”。</td>
</tr>
<tr>
<td><code>$&amp;</code></td>
<td>插入匹配的子串。</td>
</tr>
<tr>
<td>`$``</td>
<td>插入当前匹配的子串左边的内容。</td>
</tr>
<tr>
<td><code>$&#39;</code></td>
<td>插入当前匹配的子串右边的内容。</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>假如第一个参数是 RegExp对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串。</td>
</tr>
</tbody>
</table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 交换字符串中的两个单词</span></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/(\w+)\s(\w+)/</span>;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"John Smith"</span>;</div><div class="line"><span class="keyword">var</span> newstr = str.replace(re, <span class="string">"$2, $1"</span>);</div><div class="line"><span class="built_in">console</span>.log(newstr);</div><div class="line"><span class="comment">// Smith, John</span></div></pre></td></tr></table></figure>
<h4 id="String-prototype-split"><a href="#String-prototype-split" class="headerlink" title="String.prototype.split"></a>String.prototype.split</h4><p>split 的参数可以用字符串和正则表达式匹配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'HellosWorld'</span>;</div><div class="line">str.split(<span class="regexp">/s/</span>); <span class="comment">// ["Hello", "World"]</span></div></pre></td></tr></table></figure>
<h2 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h2><h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><p>待补充</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>W3C</li>
<li>MDN</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/08/09/HMTL5之websocket拆解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/09/HMTL5之websocket拆解/" itemprop="url">
                  HTML5之WebSocket拆解
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-09T11:39:36+08:00">
                2017-08-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML/" itemprop="url" rel="index">
                    <span itemprop="name">HTML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>客户端要即时获取服务端的消息, 以前的做法是使用 Ajax长轮询 或 commet 持久连接来实现, 但这样很耗费服务端带宽资源, 使用长轮询需要服务器有优秀的响应速度, 持久连接则需要服务端有良好的高并发能力.</p>
<p>基于这种现状, 才有了 WebSocket 通讯协议的诞生.</p>
<h2 id="为什么需要-WebSocket"><a href="#为什么需要-WebSocket" class="headerlink" title="为什么需要 WebSocket ?"></a>为什么需要 WebSocket ?</h2><p>目前的网络数据的传输是遵循 HTTP 1.1 传输的, 目前 HTTP协议 的缺点就是请求只能从客户端发起, 服务端无法对客户端推送消息, 所以才有长轮询和 commet 这些解决方案. 为了解决这种现状, 才有了 WebSocket 的诞生.</p>
<h2 id="WebSocket-有什么特点"><a href="#WebSocket-有什么特点" class="headerlink" title="WebSocket 有什么特点?"></a>WebSocket 有什么特点?</h2><p>(1) 建立在 TCP/IP 协议之上, 兼容性好, 客户端和服务端比较容易实现</p>
<p>(2) 没有浏览器同源限制, 服务端不用设置 CORS</p>
<p>(3) 客户端和服务端互相可以实时推送</p>
<p>(4) 协议标识符使用 <code>ws</code> , 如果加密则使用 <code>wss</code></p>
<p>(5) 一次连接, 持久有效, 有状态连接</p>
<h3 id="WebSocket-和-HTTP-的区别"><a href="#WebSocket-和-HTTP-的区别" class="headerlink" title="WebSocket 和 HTTP 的区别"></a>WebSocket 和 HTTP 的区别</h3><p>WebSocket 和 HTTP 的区别可以借用下面两张图表示( 侵删 ):</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051502.png" alt="image.png"></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051503.jpg" alt="image.png"></p>
<h2 id="WebSocket-API"><a href="#WebSocket-API" class="headerlink" title="WebSocket API"></a>WebSocket API</h2><p>因服务端语言各有实现方式, 这里阐述下客户端的 API:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建 Socket 实例</span></div><div class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">"wss://echo.websocket.org"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 连接成功</span></div><div class="line">ws.onopen = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"Connection open ..."</span>);</div><div class="line">  <span class="comment">// 初始化消息</span></div><div class="line">  ws.send(<span class="string">"Hello WebSockets!"</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 发送消息</span></div><div class="line">ws.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log( <span class="string">"Received Message: "</span> + evt.data);</div><div class="line">  <span class="comment">// 关闭 Socket</span></div><div class="line">  ws.close();</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 关闭连接或停止正在进行的链接请求</span></div><div class="line">ws.onclose = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"Connection closed."</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>详细属性可点击<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket" target="_blank" rel="external">这里</a>查看.</p>
<h2 id="WebSocket-应用"><a href="#WebSocket-应用" class="headerlink" title="WebSocket 应用"></a>WebSocket 应用</h2><p>虽然现代浏览器都已经支持 WebSocket , 也有 IE 这样不出乎意料的例外, 所幸目前有一款集成和兼容性都比较好的封装, <code>socket.io</code> .</p>
<p>Socket.IO 使用检测功能来判断是否建立 WebSocket 连接，或者是 AJAX long-polling 连接，或 Flash 等。可快速创建实时的应用程序.</p>
<h3 id="基于-Nodejs-实现一个简单的聊天室应用"><a href="#基于-Nodejs-实现一个简单的聊天室应用" class="headerlink" title="基于 Nodejs 实现一个简单的聊天室应用"></a>基于 Nodejs 实现一个简单的聊天室应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// nodejs 服务端代码</span></div><div class="line"><span class="keyword">let</span> app = <span class="built_in">require</span>(<span class="string">'express'</span>)();</div><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>).Server(app);</div><div class="line"><span class="keyword">let</span> io = <span class="built_in">require</span>(<span class="string">'socket.io'</span>)(http);</div><div class="line"></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">io.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">socket</span>)</span>&#123;</div><div class="line">  socket</div><div class="line">    .on(<span class="string">'chat message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</div><div class="line">      io.emit(<span class="string">'chat message'</span>, msg);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">http.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'listening start, port: 3000'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- HTML 客户端代码 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"messages"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"m"</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-1.11.1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/socket.io/socket.io.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> socket = io();</div><div class="line">    $(<span class="string">'form'</span>).submit(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      socket.emit(<span class="string">'chat message'</span>, $(<span class="string">'#m'</span>).val());</div><div class="line">      $(<span class="string">'#m'</span>).val(<span class="string">''</span>);</div><div class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;);</div><div class="line">    socket.on(<span class="string">'chat message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</div><div class="line">      $(<span class="string">'#messages'</span>).append($(<span class="string">'&lt;li&gt;'</span>).text(msg));</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/07/27/JavaScript/DOM3中9个鼠标事件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/27/JavaScript/DOM3中9个鼠标事件/" itemprop="url">
                  DOM3中9个鼠标事件
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-27T09:51:33+08:00">
                2017-07-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天看到一篇描述 <code>click</code> 事件的发生的条件, 需要同时满足 <code>mousedown</code> 和 <code>mouseup</code> 事件,<br>也就是鼠标按下和抬起行为在同一个元素触发才会触发 <code>click</code>.</p>
<p>另外找出 DOM3 中的9个鼠标事件回顾一下:</p>
<ol>
<li>click</li>
</ol>
<p>在用户单击主鼠标按钮（一般是左边的按钮）或者按下回车键时触发。这一点对确保易访问性很重要，意味着onclick事件处理程序既可以通过键盘也可以通过鼠标执行.</p>
<ol>
<li>dblclick</li>
</ol>
<p>在用户双击主鼠标按钮（一般是左边的按钮）时触发。从技术上说，这个事件并不是DOM2级事件规范中规定的，但鉴于它得到了广泛支持，所以DOM3 级事件将其纳入了标准</p>
<ol>
<li>mousedown</li>
</ol>
<p>在用户按下了任意鼠标按钮时触发。不能通过键盘触发这个事件.</p>
<ol>
<li>mouseup</li>
</ol>
<p>在用户释放鼠标按钮时触发。不能通过键盘触发这个事件.</p>
<ol>
<li>mouseenter</li>
</ol>
<p>在鼠标光标从元素外部首次移动到元素范围之内时触发。这个事件不冒泡，而且在光标移动到后代元素上不会触发。DOM2级事件并没有定义这个事件，但 DOM3级事件将它纳入了规范。IE、Firefox 9+和 Opera支持这个事件.</p>
<ol>
<li>mouseleave</li>
</ol>
<p>在位于元素上方的鼠标光标移动到元素范围之外时触发。这个事件不冒泡，而且在光标移动到后代元素上不会触发。DOM2级事件并没有定义这个事件，但<br>DOM3级事件将它 纳入了规范。IE、Firefox 9+和 Opera支持这个事件.</p>
<ol>
<li>mousemove</li>
</ol>
<p>当鼠标在元素内部移动时触发事件, 可以获得 client&amp;screen 坐标.</p>
<ol>
<li>mouseover</li>
</ol>
<p>鼠标移入元素时触发事件, 会冒泡到子父代元素.</p>
<ol>
<li>mouseout</li>
</ol>
<p>鼠标移出元素时触发事件, 会冒泡到子父代元素.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/07/26/JavaScript/JavaScript之Object拆解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/26/JavaScript/JavaScript之Object拆解/" itemprop="url">
                  JavaScript之Object拆解
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-26T19:17:56+08:00">
                2017-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>让我们一起来拆解一下 Object 相关联的属性、方法和 ES6 后新 Api 吧:</p>
<h2 id="属性类型"><a href="#属性类型" class="headerlink" title="属性类型"></a>属性类型</h2><p>JavaScript 中有两种数据类型: 数据属性和访问器属性</p>
<h3 id="数据属性"><a href="#数据属性" class="headerlink" title="数据属性"></a>数据属性</h3><p>数据属性有以下几个描述行为的属性:</p>
<ul>
<li>Configurable 描述这个属性是否可被 delete 删除, 默认为 true</li>
<li>Enumerable 描述这个属性是否可被枚举, 默认为 true</li>
<li>writable 描述这个属性是否可被修改, 默认为 true</li>
<li>value 描述这个属性的值</li>
</ul>
<p>如果想要修改这些系统默认属性, 可以通过 ES5 的方法 Object.defineProperty(obj, property, option).</p>
<p>注意:</p>
<ul>
<li>可以多次调用 Object.defineProperty() 修改属性, 但将 Configurable 设置为 false 是不可逆的.</li>
<li>调用 Object.defineProperty() 修改属性方法时, 如果不指定这些描述属性, 则默认值都会设置为 false.</li>
</ul>
<h3 id="访问器属性"><a href="#访问器属性" class="headerlink" title="访问器属性"></a>访问器属性</h3><p>访问器有以下几个属性:</p>
<ul>
<li>Configurable 描述这个属性是否可被 delete 删除, 默认为 true</li>
<li>Enumerable 描述这个属性是否可被枚举, 默认为 true</li>
<li>get 在读取属性时调用的函数, 默认为 undefined</li>
<li>set 在设置属性时调用的函数, 默认为 undefined</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> book = &#123; <span class="attr">_year</span>: <span class="number">2004</span>, <span class="attr">edition</span>: <span class="number">1</span> &#125;;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"> * 第一个参数: 对象</div><div class="line"> * 第二个参数: 对象的属性</div><div class="line"> * 第三个参数: 需要设置的描述属性</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperty(book, <span class="string">'year'</span>, &#123;</div><div class="line">  <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>._year; &#125;,</div><div class="line">  <span class="attr">set</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (newValue &gt; <span class="number">2004</span>) &#123;</div><div class="line">      <span class="keyword">this</span>._year = newValue;</div><div class="line">      <span class="keyword">this</span>.edition += newValue - <span class="number">2004</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">book.year = <span class="number">2009</span>;</div><div class="line"><span class="built_in">console</span>.log(book.edition); <span class="comment">// 6</span></div></pre></td></tr></table></figure>
<p>注意:</p>
<ul>
<li>get 和 set 必须同时设置, 否则会出现不能读或不能写的情况</li>
</ul>
<p>如果要一次修改多个参数的描述属性, 可以使用 Object.defineProperties()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> book = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperties(book, &#123;</div><div class="line">  <span class="attr">_year</span>: &#123;</div><div class="line">    <span class="attr">value</span>: <span class="number">2004</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">edition</span>: &#123;</div><div class="line">    <span class="attr">value</span>: <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>构造函数也是普通的函数, 如果没有通过 new 操作符生成新的实例对象, 那构造函数就是一个普通的函数.<br>为了区分构造函数于普通函数, 我们通常用大驼峰命名法给构造函数命名.<br>String、Array 等几乎所有对象都是 Object 的实例, Object 就是一个构造函数.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>() <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">String</span>() <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Function</span>() <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Info</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'XingChuan'</span>;</div><div class="line">  <span class="keyword">this</span>.age = <span class="string">'10'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> info1 = <span class="keyword">new</span> Info();</div><div class="line"><span class="keyword">let</span> info2 = <span class="keyword">new</span> Info();</div><div class="line"><span class="built_in">console</span>.log(info1.name); <span class="comment">// XingChuan</span></div><div class="line"><span class="built_in">console</span>.log(info1.age); <span class="comment">// 10</span></div><div class="line"><span class="built_in">console</span>.log(info2.name); <span class="comment">// XingChuan</span></div><div class="line"><span class="built_in">console</span>.log(info2.age); <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<h2 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h2><p>既然谈到构造函数就要谈到原型了, 每个函数都有一个原型(prototype)属性, 原型存在的意义就是, 原型上的属性和方法由所有构造函数的实例对象所共享, 如果修改了原型对象上的方法, 那所有实例都会实时更改.</p>
<p>我们平时使用 Array 和 String 的方法, 都是在其原型对象上, 所有我们创建的所有数组和字符串都可以享有这些方法.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-b332ef5ec41e1a0b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><p>在 chrome, firefox, safari 中, 有一个浏览器私有属性 <code>__proto__</code> 指向构造函数的 prototype, <code>__proto__</code> 并不是官方属性, 为了兼容性考虑, 开发中最好不要使用 <code>__proto__</code>.</p>
<p>下面我们来具象化一下原型链的构成:</p>
<h3 id="函数的原型链"><a href="#函数的原型链" class="headerlink" title="函数的原型链"></a>函数的原型链</h3><p>构造函数也是普通的函数, 只是我们拿来生成实例, 所以才有这个称谓, 而所有的函数都是 Function 的实例.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">info</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 原型链</div><div class="line">info.__proto__ =&gt; Function.prototype =&gt; Object.prototype</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-3315b5f26f6ff6ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>所有的函数都是 Function 的实例, 而 Function 是 Object 的实例, 所以有了这条原型链.</p>
<h3 id="内置对象的原型链"><a href="#内置对象的原型链" class="headerlink" title="内置对象的原型链"></a>内置对象的原型链</h3><p>很有意思的是, Object、Array、String、Function 都是函数, 所以他们都是 Function 的实例, Function 比较特殊, 它也是自身的实例.</p>
<p>Math 是个例外, 它并不是一个函数, 而是一个对象.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>) <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.__proto__ === <span class="built_in">Object</span>.prototype); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 原型链</div><div class="line">Array.__proto__ =&gt; Function.prototype =&gt; Object.protytype</div></pre></td></tr></table></figure>
<h3 id="实例对象的原型链"><a href="#实例对象的原型链" class="headerlink" title="实例对象的原型链"></a>实例对象的原型链</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Info</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line">Info.prototype.name = <span class="string">'Xingchuan'</span>;</div><div class="line">Info.prototype.age = <span class="number">10</span>;</div><div class="line">Info.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> info1 = <span class="keyword">new</span> Info();</div><div class="line">info1.showName() <span class="comment">// XingChuan</span></div><div class="line"><span class="keyword">let</span> info2 = <span class="keyword">new</span> Info();</div><div class="line">info2.name = <span class="string">'test'</span>;</div><div class="line">info2.showName() <span class="comment">// test</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 原型链</div><div class="line">info1.__proto__ =&gt; Info.prototype =&gt; Object.prototype</div></pre></td></tr></table></figure>
<p>实例对象的 <code>__proto__</code> 会指向构造函数的 prototype, 所有的原型对象都是 Object.prototype 的实例, 所以构成了这一条原型链.</p>
<p>注意:</p>
<ul>
<li>原型链的访问是有就近原则的, 如果像上面实例中已经有 name 属性, 则不会继续访问 prototype 上的 name 属性, 如果实例中没有这个属性, 则会按照原型链一直找下去, 如果没有就是 undefined.</li>
</ul>
<h3 id="元素也是-Object-的实例"><a href="#元素也是-Object-的实例" class="headerlink" title="元素也是 Object 的实例"></a>元素也是 Object 的实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.dir(<span class="built_in">document</span>.getElementsByTagName(<span class="string">'span'</span>)[<span class="number">0</span>]);</div><div class="line"><span class="comment">// span元素 =&gt; HTMLSpanElement =&gt; HTMLElement =&gt; Element =&gt; Node =&gt; EventTarget =&gt; Object.prototype</span></div><div class="line"><span class="built_in">console</span>.dir(<span class="built_in">document</span>.getElementsByTagName(<span class="string">'span'</span>)[<span class="number">0</span>] <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>元素的原型链很长, 不过可以看到元素也是 Object 的实例.</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li>原型链有就近原则, 如果在实例上访问到某属性, 就不会继续原型链寻找该属性了</li>
<li>原型是可以重新指定的</li>
<li><code>prototype</code> 的 constructor 指向 构造函数</li>
<li>实例的 <code>__proto__</code> 指向构造函数的 <code>prototype</code></li>
<li>所有函数的 <code>__proto__</code> 指向 <code>Function.prototype</code></li>
<li>函数的 <code>prototype</code> 都是基于 <code>Object.prototype</code></li>
<li>Function 也是自己的实例</li>
<li>一切起源于 <code>Object.prototype</code></li>
<li>每个原型都有 <code>constructor</code> 属性, 指向原型所属的函数, 用字面量对象改为原型的引用, 会丢失 <code>constructor</code> 这个属性</li>
</ul>
<p>来张示意图结尾( 侵删 ):</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4434201-847fdc2301562836.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="this-的指向"><a href="#this-的指向" class="headerlink" title="this 的指向"></a>this 的指向</h2><p><javascript忍者禁术> 一书中对 this 指向的问题有比较详细的描写, 推荐看看.</javascript忍者禁术></p>
<p>在讨论 this 指向的问题之前, 先要明确一下, 在严格模式下, 未指定环境对象而调用函数，则 this 值不会转型为 window.<br>除非明确把函数添加到某个对象或者调用 apply()或 call()，否则 this 值将是 undefined.</p>
<ul>
<li>普通函数中的 this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</div><div class="line">&#125;</div><div class="line">show(); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>普通函数中的 this 指向 window</p>
<ul>
<li>构造函数中的 this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Info</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　<span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> info1 = <span class="keyword">new</span> Info();</div><div class="line"><span class="built_in">console</span>.log(info1.x); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>构造函数中的 this 指向 new 出来的实例对象, new 这个操作符会改变 this 的指向.</p>
<ul>
<li>对象方法中的 this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = <span class="number">2</span>;</div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">y</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.y(); <span class="comment">// 1</span></div><div class="line"></div><div class="line">对象方法中的 <span class="keyword">this</span> 指向调用它的对象.</div></pre></td></tr></table></figure>
<ul>
<li>call、apply、bind(ES5) 中的 this</li>
</ul>
<p>call、apply、bind(ES5) 的作用就是改变 this 的指向, this 会指向第一个参数.</p>
<p>如果 call、apply、bind(ES5) 调用方法时没有传参, 默认 this 指向 window.</p>
<p>bind 只会改变 this 的指向, 并不会执行方法, call 和 apply 则会改变指向时也执行方法.</p>
<ul>
<li>事件函数中的 this</li>
</ul>
<p>事件函数中的 this 指向绑定事件的元素.</p>
<ul>
<li>箭头函数中的 this</li>
</ul>
<p>箭头函数是 ES6 中新增的方法, 不同于其他情况中的 this 在调用时才决定指向, 箭头函数 this 指向定义时的外围, 在不确认指向的情况下, 请慎用.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ECMAScript 6 入门对箭头函数的使用限制做了说明:</div><div class="line">（1）函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。</div><div class="line">（2）不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</div><div class="line">（3）不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用Rest参数代替。</div><div class="line">（4）不可以使用yield命令，因此箭头函数不能用作Generator函数。</div></pre></td></tr></table></figure>
<h2 id="数据类型判断"><a href="#数据类型判断" class="headerlink" title="数据类型判断"></a>数据类型判断</h2><p>在开发中, 我们可以用 typeof 来判断类型, 但有很大的局限性.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> <span class="number">1</span></div><div class="line"><span class="comment">// "number"</span></div><div class="line"><span class="keyword">typeof</span> <span class="string">'1'</span></div><div class="line"><span class="comment">// "string"</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">true</span></div><div class="line"><span class="comment">// "boolean"</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span></div><div class="line"><span class="comment">// "undefined"</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">null</span></div><div class="line"><span class="comment">// "object"</span></div><div class="line"><span class="keyword">typeof</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</div><div class="line"><span class="comment">// "function"</span></div><div class="line"><span class="keyword">typeof</span> []</div><div class="line"><span class="comment">// "object"</span></div><div class="line"><span class="keyword">typeof</span> &#123;&#125;</div><div class="line"><span class="comment">// "object"</span></div></pre></td></tr></table></figure>
<p>typeof 只对一些简单数据类型有效, 为了可以判断各种内置对象, 我们需要采取一些 <code>手段</code> , 使用 Object 原型上的 toString 方法.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">1</span>);</div><div class="line"><span class="comment">// "[object Number]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">'1'</span>);</div><div class="line"><span class="comment">// "[object String]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>);</div><div class="line"><span class="comment">// "[object Boolean]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"><span class="comment">// "[object Function]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>);</div><div class="line"><span class="comment">// "[object Null]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>);</div><div class="line"><span class="comment">// "[object Undefined]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>());</div><div class="line"><span class="comment">// "[object Date]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Math</span>);</div><div class="line"><span class="comment">// "[object Math]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call([]);</div><div class="line"><span class="comment">// "[object Array]"</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;);</div><div class="line"><span class="comment">// "[object Object]"</span></div></pre></td></tr></table></figure>
<p>可以全部搞定了.</p>
<h2 id="ES6-之后的新特性"><a href="#ES6-之后的新特性" class="headerlink" title="ES6 之后的新特性"></a>ES6 之后的新特性</h2><h3 id="对象属性的简洁写法"><a href="#对象属性的简洁写法" class="headerlink" title="对象属性的简洁写法"></a>对象属性的简洁写法</h3><blockquote>
<p>简洁的写法可以减少代码量也可以更加优雅, 但代码是给计算机看的, 同时也是给人看的, 容易发生歧义的地方一定要注意.</p>
</blockquote>
<ul>
<li>属性的简写</li>
</ul>
<p>如果属性名与属性值相同, 可以忽略不写.<br>属性值是字符串时不可简写.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// old</span></div><div class="line"><span class="keyword">let</span> name = <span class="string">'XingChuan'</span>;</div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>: name</div><div class="line">&#125;;</div><div class="line"><span class="comment">// new</span></div><div class="line"><span class="keyword">let</span> name = <span class="string">'XingChuan'</span>;</div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  name</div><div class="line">&#125;;</div><div class="line"><span class="comment">// error</span></div><div class="line"><span class="keyword">let</span> name = <span class="string">'XingChuan'</span>;</div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>:<span class="string">'name'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>函数的简写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// old</span></div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">show</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'show'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// new</span></div><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  show() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'show'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="字面量形式定义对象"><a href="#字面量形式定义对象" class="headerlink" title="字面量形式定义对象"></a>字面量形式定义对象</h3><p>ES5只支持这种字面量定义:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'XingChuan'</span>,</div><div class="line">  <span class="attr">age</span>: <span class="number">10</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>ES6支持这种写法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> obj =&#123;</div><div class="line">  [name]: <span class="string">'XingChuan'</span>,</div><div class="line">  [<span class="string">'a'</span> + <span class="string">'ge'</span>]: <span class="number">10</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// 作为属性名的表达式会自动 toString() , 应避免使用对象作为表达式, 因为 String(&#123;&#125;) === '[object Object]'</span></div></pre></td></tr></table></figure>
<p>注意:</p>
<ul>
<li>属性名表达式与简洁表示法不能同时使用, 会报错</li>
<li>属性名表达式为对象时属性名会重复的问题</li>
</ul>
<h3 id="Object-is-‘’-’’-同值相等API"><a href="#Object-is-‘’-’’-同值相等API" class="headerlink" title="Object.is(‘’,’’) 同值相等API"></a>Object.is(‘’,’’) 同值相等API</h3><p><code>Object.is()</code> 基本等同于 <code>===</code> , 除却两点:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+<span class="number">0</span> === <span class="number">-0</span> <span class="comment">// true</span></div><div class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span> <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>, <span class="number">-0</span>) <span class="comment">// false</span></div><div class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="Object-assign-target-source1-source2-复制可枚举属性"><a href="#Object-assign-target-source1-source2-复制可枚举属性" class="headerlink" title="Object.assign(target, source1, source2) 复制可枚举属性"></a>Object.assign(target, source1, source2) 复制可枚举属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> target = &#123;</div><div class="line">  <span class="attr">info</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'name1'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> source1 =&#123;</div><div class="line">  <span class="attr">info</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'name2'</span>,</div><div class="line">    <span class="attr">age</span>: <span class="number">30</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> source2 =&#123;</div><div class="line">  <span class="attr">info</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'name3'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.assign(target, source1, source2);</div><div class="line"><span class="comment">// &#123; info: &#123;name: 'name3'&#125;&#125;</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Object.assign 是浅拷贝, 如果属性的值是对象, 就会添加新的引用, 而不是在原有地址上添加属性.</span></div><div class="line"><span class="comment">// target会自动转换为对象, 所以不能为 null 或 undefined , 会报错</span></div><div class="line"><span class="comment">// source为 null 或 undefined 时, 因为无法转换为对象, 会跳过, 但不会报错</span></div><div class="line"><span class="comment">// 若 source 为字符串, 会以数组的形式复制到 target 中</span></div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure>
<h3 id="属性的可枚举性"><a href="#属性的可枚举性" class="headerlink" title="属性的可枚举性"></a>属性的可枚举性</h3><p>每个对象属性都有一个描述对象 Description , 可以控制是否可被枚举, 数据属性的其中之一.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'XingChuan'</span></div><div class="line">&#125;;</div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj,<span class="string">'name'</span>);</div><div class="line"></div><div class="line"><span class="comment">// &#123;</span></div><div class="line"><span class="comment">//   configurable: true,</span></div><div class="line"><span class="comment">//   enumerable: true, // 如果可枚举为 false , 某些操作会忽略掉这个属性</span></div><div class="line"><span class="comment">//   value: "XingChuan",</span></div><div class="line"><span class="comment">//   writable: true</span></div><div class="line"><span class="comment">// &#125;</span></div></pre></td></tr></table></figure>
<p>ES5 中有 3 个属性会忽略 <code>enumerable</code> 为 <code>false</code> 的属性:</p>
<ul>
<li>for…in 循环</li>
<li>Object.keys()</li>
<li>JSON.stringify()</li>
</ul>
<p>ES6 新增的 Object.assign() 也会忽略描述中不可枚举的属性.</p>
<p>数组中的 length 属性不会被 for…in 获取就是因为不可枚举的描述.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="string">'length'</span>);</div><div class="line"></div><div class="line"><span class="comment">// &#123;</span></div><div class="line"><span class="comment">//   configurable: false,</span></div><div class="line"><span class="comment">//   enumerable: false,</span></div><div class="line"><span class="comment">//   value: 3,</span></div><div class="line"><span class="comment">//   writable: true</span></div><div class="line"><span class="comment">// &#125;</span></div></pre></td></tr></table></figure>
<p>另外, ES6 中也规定了 Class 原型上的方法是不可枚举的.</p>
<h3 id="属性的遍历"><a href="#属性的遍历" class="headerlink" title="属性的遍历"></a>属性的遍历</h3><ol>
<li>for…in</li>
</ol>
<p>for…in 循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）</p>
<ol>
<li>Object.keys(obj)</li>
</ol>
<p>Object.keys返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性)</p>
<ol>
<li>Object.getOwnPropertyNames(obj)</li>
</ol>
<p>Object.getOwnPropertyNames返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）</p>
<ol>
<li>Object.getOwnPropertySymbols(obj)</li>
</ol>
<p>Object.getOwnPropertySymbols返回一个数组，包含对象自身的所有 Symbol 属性</p>
<ol>
<li>Reflect.ownKeys(obj)</li>
</ol>
<p>Reflect.ownKeys返回一个数组，包含对象自身的所有属性，不管属性名是 Symbol 或字符串，也不管是否可枚举</p>
<p>以上 5 种方法在遍历顺序上, 遵循以下 3 条规则:</p>
<ul>
<li>首先遍历所有属性名为数值的属性，按照数字排序</li>
<li>其次遍历所有属性名为字符串的属性，按照生成时间排序</li>
<li>最后遍历所有属性名为 Symbol 值的属性，按照生成时间排序</li>
</ul>
<h3 id="proto-Object-getPrototypeOf-Object-setPrototypeOf"><a href="#proto-Object-getPrototypeOf-Object-setPrototypeOf" class="headerlink" title="__proto__, Object.getPrototypeOf(), Object.setPrototypeOf()"></a><code>__proto__</code>, Object.getPrototypeOf(), Object.setPrototypeOf()</h3><h4 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a><code>__proto__</code></h4><p><code>__proto__</code> 指向当前实例的原型对象, 其没有被 ES6 列为正式 API, 但因为被浏览器厂商广泛使用, 被收入附录.</p>
<p>某些浏览器厂商同样指向原型对象, 可能是另一种命名方式, 所以为了兼容性考虑, 最好不要通过它去操作原型.</p>
<h4 id="Object-setPrototypeOf"><a href="#Object-setPrototypeOf" class="headerlink" title="Object.setPrototypeOf()"></a>Object.setPrototypeOf()</h4><p>Object.setPrototypeOf() 是 ES6 设置原型对象的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> obj = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">10</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> option = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">20</span>,</div><div class="line">  <span class="attr">y</span>: <span class="number">30</span>,</div><div class="line">  <span class="attr">z</span>: <span class="number">40</span></div><div class="line">&#125;;</div><div class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, option);</div><div class="line"></div><div class="line">obj.x <span class="comment">// 10</span></div><div class="line">obj.y <span class="comment">// 30</span></div><div class="line">obj.z <span class="comment">// 40</span></div><div class="line"></div><div class="line"><span class="comment">// 因原型链访问顺序的优先级, obj.x 为 10 而不是 20, 如 obj 不存在 x 的属性, obj.x 就会为 20.</span></div></pre></td></tr></table></figure>
<h4 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf()"></a>Object.getPrototypeOf()</h4><p>Object.getPrototypeOf(obj) 是 ES6 返回原型对象的方法</p>
<h3 id="Object-keys-Object-values-Object-entries"><a href="#Object-keys-Object-values-Object-entries" class="headerlink" title="Object.keys(), Object.values(), Object.entries()"></a>Object.keys(), Object.values(), Object.entries()</h3><p>Object.keys() 是 ES5 中遍历属性的方法, ES6 新增了 Object.values(), Object.entries().</p>
<ul>
<li>Object.values</li>
</ul>
<p>返回对象自身的(不包含继承的), 可枚举的键值</p>
<ul>
<li>Object.entries()</li>
</ul>
<p>返回对象自身的(不包含继承的), 可枚举的键值对数组</p>
<h3 id="对象的拓展运算符"><a href="#对象的拓展运算符" class="headerlink" title="对象的拓展运算符"></a>对象的拓展运算符</h3><p>ES8 中将数组的拓展运算符引入到了对象中.</p>
<h4 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> &#123;a, b, ...x&#125; = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span>&#125;;</div><div class="line"><span class="built_in">console</span>.log(x);</div><div class="line"><span class="comment">// &#123;c:3,d:4&#125;</span></div></pre></td></tr></table></figure>
<p>注意:</p>
<ol>
<li>拓展运算符会复制对象所有未读取的键值对, 所以右侧必须是对象或可转换为对象, 不能为 null 或 undefined</li>
<li>拓展运算符必须置为最后一个位置, 否则会报错</li>
<li>拓展运算符不会复制原型上的方法</li>
</ol>
<h4 id="克隆对象"><a href="#克隆对象" class="headerlink" title="克隆对象"></a>克隆对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = &#123;<span class="attr">name</span>: <span class="string">'XingChuan'</span>, <span class="attr">age</span>: <span class="number">88</span>&#125;;</div><div class="line"><span class="keyword">let</span> cloneObj = &#123; ...x &#125;;</div></pre></td></tr></table></figure>
<h4 id="合并对象"><a href="#合并对象" class="headerlink" title="合并对象"></a>合并对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = &#123;<span class="attr">name</span>: <span class="string">'XingChuan'</span>, <span class="attr">age</span>: <span class="number">88</span>&#125;;</div><div class="line"><span class="keyword">let</span> y = &#123;<span class="attr">job</span>: <span class="string">'developer'</span>&#125;;</div><div class="line"><span class="keyword">let</span> cloneObj = &#123; ...x, ...y &#125;;</div></pre></td></tr></table></figure>
<h4 id="拓展运算符表达式"><a href="#拓展运算符表达式" class="headerlink" title="拓展运算符表达式"></a>拓展运算符表达式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> obj = &#123; ...&#123;x &gt; <span class="number">1</span> ? &#123;<span class="attr">a</span>: <span class="number">1</span>&#125; : &#123;&#125; &#125; &#125;;</div></pre></td></tr></table></figure>
<p>扩展运算符的参数对象之中，如果有取值函数get，这个函数是会执行的.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> runtimeError = &#123;</div><div class="line">  ...a,</div><div class="line">  ...&#123;</div><div class="line">    get x() &#123;</div><div class="line">      throws <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'thrown now'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors()"></a>Object.getOwnPropertyDescriptors()</h3><p>ES5 中 Object.getOwnPropertyDescriptor(obj, property) 可以获取对象属性的描述对象.</p>
<p>ES8 中 新增了 Object.getOwnPropertyDescriptors(obj) 可以获取对象所有属性的描述对象, 描述对象包括 get 和 set 属性.</p>
<h3 id="Null-传导运算符"><a href="#Null-传导运算符" class="headerlink" title="Null 传导运算符"></a>Null 传导运算符</h3><p>我们要读取对象的一个属性或调用其方法, 为了不报错, 应该先判断对象是否存在, 然后再读取其属性.</p>
<p>如果我们想读取 obj.info.xingchuan.name, 安全的写法应该是下面这样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> name = obj &amp;&amp; obj.info &amp;&amp; obj.info.xingchuan &amp;&amp; obj.info.xingchuan.name || <span class="string">'default'</span>;</div></pre></td></tr></table></figure>
<p>现在提案中引入了 Null 传导运算符, 简化了写法, 可以写为下面这种方式.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> name = obj ?. info ?. xingchuan ?. name || <span class="string">'default'</span>;</div></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>MDN</li>
<li>JavaScript高级程序设计</li>
<li>ECMAScript6入门</li>
<li>JavaScript忍者禁术</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/06/22/JavaScript/encodeURI和encodeURIComponent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/22/JavaScript/encodeURI和encodeURIComponent/" itemprop="url">
                  encodeURI和encodeURIComponent
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-22T15:45:35+08:00">
                2017-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>URL是统一命名的网络资源, 是为了支持网络所有协议使用而诞生的.</p>
<p>需要满足以下 3 个特点:</p>
<ul>
<li>移植性 (支持各种网络协议)</li>
<li>完整性 (不会丢失数据)</li>
<li>阅读性 (语义化结构)</li>
</ul>
<p>为了满足以上特点, 设计者引入了转义序列, 以 ACSII 的有限子集转换对任意数据和字符进行编码, 如此的话, 只要支持 ACSII 码的设备都可以根据映射表来使用.</p>
<p>JavaScript 中进行编码和解码工作的是 encodeURI/decodeURI 和 encodeURIComponent/decodeURIComponent</p>
<h3 id="encodeURI-decodeURI"><a href="#encodeURI-decodeURI" class="headerlink" title="encodeURI/decodeURI"></a>encodeURI/decodeURI</h3><p>语法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">encodeURI(URIString);</div></pre></td></tr></table></figure>
<p>返回值:</p>
<p>返回以转义序列替换的 URISting 副本</p>
<p>说明:</p>
<p>该方法不会替换 ACSII 中的字母和数字, 也不会替换 ACSII 的标点符号 <code>- _ . ! ~ * &#39; ( )</code></p>
<p>编码效果展示:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(<span class="string">"http://www.w3school.com.cn"</span>)+ <span class="string">"&lt;br /&gt;"</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(<span class="string">"http://www.w3school.com.cn/My first/"</span>));</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(<span class="string">",/?:@&amp;=+$#"</span>));</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http://www.w3school.com.cn</div><div class="line">http://www.w3school.com.cn/My%20first/</div><div class="line">,/?:@&amp;=+$#</div></pre></td></tr></table></figure>
<p>解码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">decodeURI</div></pre></td></tr></table></figure>
<h3 id="encodeURIComponent-decodeURIComponent"><a href="#encodeURIComponent-decodeURIComponent" class="headerlink" title="encodeURIComponent/decodeURIComponent"></a>encodeURIComponent/decodeURIComponent</h3><p>语法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">encodeURIComponent(URIstring)</div></pre></td></tr></table></figure>
<p>返回值:</p>
<p>返回以转义序列替换的 URISting 副本</p>
<p>说明:</p>
<p>该方法不会替换 ACSII 中的字母和数字, 也不会替换 ACSII 的标点符号 <code>- _ . ! ~ * &#39; ( )</code>.</p>
<p><code>;/?:@&amp;=+$,#</code> 这些用于分割 URL 的标点符号, 会被转义.</p>
<p>编码效果展示:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(<span class="string">"http://www.w3school.com.cn"</span>));</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(<span class="string">"http://www.w3school.com.cn/p 1/"</span>));</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(<span class="string">",/?:@&amp;=+$#"</span>));</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http%3A%2F%2Fwww.w3school.com.cn</div><div class="line">http%3A%2F%2Fwww.w3school.com.cn%2Fp%201%2F</div><div class="line">%2C%2F%3F%3A%40%26%3D%2B%24%23</div></pre></td></tr></table></figure>
<p>解码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">decodeURIComponent</div></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li>HTTP 权威指南</li>
<li>w3cschool</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/06/22/tools/前端工作流-Sublime同步刷新浏览器&分屏操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/22/tools/前端工作流-Sublime同步刷新浏览器&分屏操作/" itemprop="url">
                  前端工作流-Sublime同步刷新浏览器&分屏操作
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-22T12:54:38+08:00">
                2017-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="电脑环境"><a href="#电脑环境" class="headerlink" title="电脑环境"></a>电脑环境</h3><ul>
<li>Mac pro 10.12.5</li>
<li>chrome 浏览器</li>
</ul>
<p>最近更换了 Mac 本, 在尝试一些提高工作效率的流程和工具, 今天分享一下 sublime 的使用技巧.</p>
<h3 id="Sublime-保存浏览器同步刷新"><a href="#Sublime-保存浏览器同步刷新" class="headerlink" title="Sublime 保存浏览器同步刷新"></a>Sublime 保存浏览器同步刷新</h3><p>安装 Sublime 插件, 不通过 package control 安装, 需要通过 git 克隆, 网友说直接安装的有问题, 具体没有细究.</p>
<p>插件官方地址: <a href="https://github.com/alepez/LiveReload-sublimetext3" target="_blank" rel="external">https://github.com/alepez/LiveReload-sublimetext3</a></p>
<p>Mac 安装方法:</p>
<ol>
<li>执行以下命令:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/</div><div class="line">rm -rf LiveReload</div><div class="line">git <span class="built_in">clone</span> https://github.com/alepez/LiveReload-sublimetext3 LiveReload</div></pre></td></tr></table></figure>
<p>安装插件成功.</p>
<ol>
<li><p>commond + shift + p 启动 sublime 命令行 (LiveReload:enable/disable plug-ins =&gt; Enable - simple reload)</p>
</li>
<li><p>在谷歌应用商店安装 livereload 插件</p>
</li>
<li><p>在 chrome 点击 livereload 按钮, 图标中间小圆点变成实心即成功.(点击需在你想要同步刷新的页面完成)</p>
</li>
</ol>
<h3 id="Mac-同窗口分屏操作"><a href="#Mac-同窗口分屏操作" class="headerlink" title="Mac 同窗口分屏操作"></a>Mac 同窗口分屏操作</h3><p>win 窗口左右分屏有很方便的 win + 左箭头/右箭头</p>
<p>Mac 其实也有类似功能, 点击窗口左上角最大化按钮, 持续 2s 以上, 即可拖动到左边窗口/右边窗口, 点击现存的窗口即可填充另一边的窗口.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/05/26/HTML&CSS/CSS属性缩写整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/26/HTML&CSS/CSS属性缩写整理/" itemprop="url">
                  CSS属性缩写整理
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-26T09:56:01+08:00">
                2017-05-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>属性缩写可以提高代码编辑效率, 也可以减少冗余代码, 是开发过程中不可或缺的部分.</p>
<h3 id="border-width"><a href="#border-width" class="headerlink" title="border-width"></a>border-width</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">border-width: 1px; // 上右下左均1px</div><div class="line">border-width: 1px 2px; // 上下1px 左右2px</div><div class="line">border-width: 1px 2px 3px; // 上1px 左右2px 下3px</div><div class="line">border-width: 1px 2px 3px 4px; // 上1px 右2px 下3px 左1px</div></pre></td></tr></table></figure>
<h3 id="border-radius"><a href="#border-radius" class="headerlink" title="border-radius"></a>border-radius</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">border-radius: 1px; // 四个角均1px</div><div class="line">border-radius: 1px 2px; // 上左、下右1px 上右、下左2px</div><div class="line">border-radius: 1px 2px 3px; // 上左1px 上右、下左2px 下右3px</div><div class="line">border-radius: 1px 2px 3px 4px; // 上左1px 上右2px 下右3px 下左1px</div></pre></td></tr></table></figure>
<h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">background-color: #000;</div><div class="line">background-image: url(images/bg.gif);</div><div class="line">background-repeat: no-repeat;</div><div class="line">background-position: top right;</div></pre></td></tr></table></figure>
<p>简写:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">background: #000 url(images/bg.gif) no-repeat top right;</div></pre></td></tr></table></figure></p>
<h3 id="font"><a href="#font" class="headerlink" title="font"></a>font</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">font-style</span>: <span class="selector-tag">italic</span>;</div><div class="line"><span class="selector-tag">font-weight</span>: <span class="selector-tag">bold</span>;</div><div class="line"><span class="selector-tag">font-size</span>: <span class="selector-class">.8em</span>;</div><div class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2</span>;</div><div class="line"><span class="selector-tag">font-family</span>: <span class="selector-tag">Arial</span>, <span class="selector-tag">sans-serif</span>;</div></pre></td></tr></table></figure>
<p>简写:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">font: italic bold .8em/1.2 Arial, sans-serif;</div></pre></td></tr></table></figure></p>
<h3 id="border"><a href="#border" class="headerlink" title="border"></a>border</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">border-width</span>: 1<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">border-style</span>: <span class="selector-tag">solid</span>;</div><div class="line"><span class="selector-tag">border-color</span>: <span class="selector-id">#000</span>;</div></pre></td></tr></table></figure>
<p>简写:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</div></pre></td></tr></table></figure></p>
<h3 id="margin-amp-padding"><a href="#margin-amp-padding" class="headerlink" title="margin&amp;padding"></a>margin&amp;padding</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">margin-top</span>: 10<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">margin-right</span>: 5<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">margin-bottom</span>: 10<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">margin-left</span>: 5<span class="selector-tag">px</span>;</div></pre></td></tr></table></figure>
<p>简写:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">margin</span>: 10<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 5<span class="selector-tag">px</span>;</div></pre></td></tr></table></figure></p>
<p>这里主要借鉴 MDN 上的信息, 感觉总结的不是很全面, CSS3 的属性都没有体现, 等有时间再扩充下 CSS3 的属性缩写部分.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/05/12/works/SVN基础使用教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/works/SVN基础使用教程/" itemprop="url">
                  SVN基础使用教程
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T15:15:32+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/works/" itemprop="url" rel="index">
                    <span itemprop="name">works</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司使用 SVN 做代码管理, 之前没有接触过, 网上找了很多教程, 但都没说的很全面.</p>
<p>推荐一个我目前看到比较完整的 SVN 教程.</p>
<p><a href="http://www.open-open.com/lib/view/open1432211679708.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1432211679708.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/05/09/works/nodetpl模版引擎使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/works/nodetpl模版引擎使用/" itemprop="url">
                  nodetpl模版引擎使用
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T22:23:46+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/works/" itemprop="url" rel="index">
                    <span itemprop="name">works</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="nodetpl-关键字"><a href="#nodetpl-关键字" class="headerlink" title="nodetpl 关键字"></a>nodetpl 关键字</h2><ul>
<li>&lt;? ?&gt; nodetpl 定界符</li>
<li>$ROOT 模版中 HTML 代码需要包裹在 id 为 $ROOT 的元素中</li>
<li>ROOT 在 script 标签中使用, 相当于 document.getElementById(‘$ROOT’)</li>
<li>$SUBROOT 多模版, 子模版 HTML 用 id 为 $SUBROOT 的元素包裹</li>
<li>SUBROOT 多模版, 在子模版 script 标签内使用.</li>
<li>$DATA 传入模版中的数据挂载在 $DATA 下</li>
<li>= 纯文本渲染, 放 XSS</li>
<li>== HTML, JS 代码会实际渲染</li>
<li>include 引入 tpl 模版</li>
<li>template 多模版, 单模版用 template包裹</li>
<li>main 多模版, 主模版需设置 name=”main”</li>
<li>nodetpl.config 配置</li>
<li>nodetpl.get 渲染, 可指定 url</li>
<li>nodetpl.render 渲染模版代码, 一般手动拼接</li>
<li>nodetpl.exec 执行模版中的 js 代码</li>
<li>–extname 拓展名, 默认 .tpl</li>
<li>–encoding 预编译指定编码</li>
<li>–watch 预编译实时监视</li>
<li>–nostrict 预编译不使用严格模式</li>
</ul>
<h2 id="起步-Demo"><a href="#起步-Demo" class="headerlink" title="起步 Demo"></a>起步 Demo</h2><h3 id="引入文件"><a href="#引入文件" class="headerlink" title="引入文件"></a>引入文件</h3><ul>
<li>script 标签引入</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/nodetpl.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>require 模块化引入</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nodetpl = <span class="built_in">require</span>(<span class="string">'nodetpl'</span>);</div></pre></td></tr></table></figure>
<h3 id="创建模版"><a href="#创建模版" class="headerlink" title="创建模版"></a>创建模版</h3><p>创建 <code>tpl/test.tpl</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&lt;?=@title?&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  &lt;?for (var i=0; i&lt;@favor.length); i++?) &#123;&gt;</div><div class="line">    &lt;li&gt;&lt;?=@favor[i]?&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  &lt;?&#125;?&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h3><p>nodetpl.get 与 nodetpl.render 需要使用 Nginx 或 Apache 代理.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data = &#123;</div><div class="line">  <span class="string">"title"</span>: <span class="string">"个人爱好"</span>,</div><div class="line">  <span class="string">"favor"</span>: [<span class="string">"足球"</span>, <span class="string">"篮球"</span>, <span class="string">"乒乓球"</span>, <span class="string">"琉璃球"</span>]</div><div class="line">&#125;;</div><div class="line">nodetpl.get(<span class="string">'tpls/test.tpl'</span>, data, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(d);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="执行结果"><a href="#执行结果" class="headerlink" title="执行结果"></a>执行结果</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>个人爱好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>足球<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>篮球<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>乒乓球<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>琉璃球<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="nodetpl-API"><a href="#nodetpl-API" class="headerlink" title="nodetpl API"></a>nodetpl API</h2><ul>
<li>nodetpl.config 基本配置, 一般使用默认</li>
<li>nodetpl.get 获取模版或者编译后的模版文件</li>
<li>nodetpl.render 渲染某个文件</li>
<li>nodetpl.exec 执行模版里面的 js 代码</li>
</ul>
<h3 id="API-参数"><a href="#API-参数" class="headerlink" title="API 参数"></a>API 参数</h3><ol>
<li>nodetpl.config(options)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">nodetpl.config(&#123;</div><div class="line">  <span class="attr">base</span>: <span class="string">'http://www.nodetpl.com/static/tpl/'</span>,   <span class="comment">// 强制指定模板根目录</span></div><div class="line">  openTag: <span class="string">'&lt;?'</span>,</div><div class="line">  <span class="attr">closeTag</span>: <span class="string">'?&gt;'</span>,</div><div class="line">  <span class="attr">strict</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">map</span>: <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> str;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">beforeCompile</span>: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> html;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">afterCompile</span>: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> html;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>base：模板所在的根路径，可以省略。若配置该参数，则使用 .get() 方法填写的路径会相对于该路径进行查找</li>
<li>openTag：模板定界符开始标签，默认为：&lt;?</li>
<li>closeTag：模板定界符结束标签，默认为：?&gt;</li>
<li>strict：是否开启严格模式，默认开启</li>
<li>map：传递一个解析函数（转换器），用来解析其他语法，例如 php、jsp 等</li>
<li>beforeCompile：编译前的处理函数</li>
<li>afterCompile：编译后的处理函数</li>
</ul>
<ol>
<li>nodetpl.get(url, [data, ] callback)</li>
</ol>
<ul>
<li>url 模版文件地址</li>
<li>data 传入的数据, 值为 false 则暂缓渲染, 传入 NodeTplClass 实例作为 callback 的参数, 需要渲染时, 使用 tpl.render(data).</li>
<li>callback 接收渲染后的 html 作为参数</li>
</ul>
<ol>
<li>nodetpl.render(tplcontent[, data][, callback]);</li>
</ol>
<ul>
<li>tplcontent 需要渲染的 HTML 结构</li>
<li>data 传入的数据</li>
<li>callback 接收渲染后的 HTML 结构为参数</li>
</ul>
<ol>
<li>nodetpl.exec(content);</li>
</ol>
<ul>
<li>执行 HTML 结构中的 JavaScript 代码.</li>
</ul>
<h2 id="nodetpl-预编译"><a href="#nodetpl-预编译" class="headerlink" title="nodetpl 预编译"></a>nodetpl 预编译</h2><p>需要安装 node 模块: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -g nodetpl</div></pre></td></tr></table></figure>
<p>使用语法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nodetpl &lt;path&gt; --extname &lt;extname&gt; --encoding &lt;encoding&gt; --nostrict --watch</div></pre></td></tr></table></figure>
<ul>
<li><code>&lt;path&gt;</code>：必选，模板文件的路径，或模板所在的目录路径</li>
<li><code>--extname</code>：可选，模板文件的扩展名，默认为 .tpl</li>
<li><code>--encoding</code>：可选，模板的编码格式，默认为 utf-8，可选值：utf-8、gbk</li>
<li><code>--nostrict</code>：可选，启用非 strict 模式，不推荐传递该参数</li>
<li><code>--watch</code>：可选，是否监控文件变化，默认为 false，当传递该参数时，修改模板内容会同步自动编译</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.jixingchuan.com/2017/05/07/works/Web前端面试总结-2017-05/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="纪行川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行川草庐">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/07/works/Web前端面试总结-2017-05/" itemprop="url">
                  Web前端面试总结_2017.07
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-07T22:31:31+08:00">
                2017-05-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/works/" itemprop="url" rel="index">
                    <span itemprop="name">works</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文链接: <a href="https://github.com/Xing-Chuan/blog/blob/master/works/Web前端面试总结-2017-05.md" target="_blank" rel="external">https://github.com/Xing-Chuan/blog/blob/master/works/Web前端面试总结-2017-05.md</a></p>
<p>面试告一段落, 把自己的面试体验整理一下, 给各位提供一下备战的思路.</p>
<p>声明: 以下皆是个人观点, 仅供参考之用.</p>
<h2 id="简历投递"><a href="#简历投递" class="headerlink" title="简历投递"></a>简历投递</h2><p>前期为了解自身短板, 可以海投一些试试. 不建议长期海投简历,<br>对用人单位简历筛选和你自身都没什么好处.<br>投简历之前最起码要关注以下几点(薪资范围, 公司位置, 职位要求, 是否为培训机构冒充招聘).</p>
<h2 id="前端职位类型"><a href="#前端职位类型" class="headerlink" title="前端职位类型"></a>前端职位类型</h2><p>现在前端招人分的挺细了, 下面是我印象中几种职位.</p>
<ul>
<li>Web 前端开发工程师 (页面重构方面和JS逻辑方面)</li>
<li>HTML5 前端开发工程师 (一般都是移动端或者 canvas 做游戏)</li>
<li>WebGL 前端开发工程师 (这是数据可视化的, 三维实时展现数据)</li>
<li>APP 前端开发工程师 (应该混合 App 开发、RN 都算这里面)</li>
<li>微信小程序、公众号开发 前端开发工程师 (我是不准备选, 可能小公司会专门找人做这个)</li>
<li>PHP/JAVA 前端开发工程师 (公司可能前后端没有完全分离)</li>
<li>React 前端开发工程师 (做大项目的居多, 业务逻辑复杂)</li>
<li>Nodejs 工程师 (写服务端的, Node 处理高并发很优秀, CNode 社区很多招的)</li>
</ul>
<h2 id="公司类型"><a href="#公司类型" class="headerlink" title="公司类型"></a>公司类型</h2><p>每个公司的技术栈是不同的, 招人也会倾向于你简历的技术栈.</p>
<ul>
<li>稳健型 使用 jQuery 等历史悠久类库, 一般不用 3 大框架, 重视 JQuery, JS, HTML + CSS 基础和实际效果实现</li>
<li>潮流型 普遍大公司或者中小型公司, 会使用 Angular, Vue, React 等框架, 会问框架的具体使用和下面我写的那些东西, 原理偏多,很少问 jQuery.</li>
<li>基础型 页面重构&amp;效果呈现, CSS3 + HTML5, 基础 JS 能力, 招你可能就是写页面或者活动页之类的</li>
<li>偏门型 招你专做小程序&amp;微信相关东西, 或者WebGL,D3之类的做数据化展示,比较高深,恩..</li>
<li>疯癫型 不知所云, 把面试当公司宣传活动或者拿面试题打击你, 我没遇到过, 有人遇到过, 是我的话, 离远点, 只是个人建议.</li>
</ul>
<p>不管到哪里, 基础都很重要, 恩, 随机应变也很重要.</p>
<h2 id="面试官考教流程"><a href="#面试官考教流程" class="headerlink" title="面试官考教流程"></a>面试官考教流程</h2><ul>
<li>你的笔试题, 根据其做延伸.</li>
<li>你的简历, 技术栈、工作外学习情况、项目经验. 第一页很重要, 最好都能掌握, 有亮点更好.</li>
<li>面试官额外的延展的知识点, 随机问,看你运气和积累(一般会提及到 ES6、解决实际问题的方法、数据结构与算法都有可能).</li>
</ul>
<h3 id="应对"><a href="#应对" class="headerlink" title="应对"></a>应对</h3><ul>
<li>刷题, 各种基础题会帮你快速回忆起来, 比你看书快, 如果基础不好的话, 看书好好学学吧.</li>
<li>简历上自己写的东西, 要能说出来.</li>
<li>积累, 每次面试不成功就回来填坑吧, 还是有掌握不到位的. 我觉得能坚持下来的话, 找工作只是时间问题.</li>
</ul>
<h2 id="面试着重点分类"><a href="#面试着重点分类" class="headerlink" title="面试着重点分类"></a>面试着重点分类</h2><p>根据公司业务不同, 着重点不一样, 公司能把你简历挑出来, 就说明有用人单位感兴趣的部分.</p>
<ul>
<li>可能你写的是 <code>熟练使用 Vue</code>, 公司也是这个技术栈.</li>
<li>可能你知识写的全面, 公司想面面你实际掌握怎么样.</li>
<li>可能你项目写的贴合用人单位需要, 比如都是做后台管理的.</li>
</ul>
<h3 id="框架问题-Vue-举例-3框架实质问题差不多-具体有些差异"><a href="#框架问题-Vue-举例-3框架实质问题差不多-具体有些差异" class="headerlink" title="框架问题: (Vue 举例, 3框架实质问题差不多, 具体有些差异)"></a>框架问题: (Vue 举例, 3框架实质问题差不多, 具体有些差异)</h3><ul>
<li>封装过哪些组件?有自己写过 UI 组件吗?</li>
<li>什么是 MVVM , 和 MVC 是什么区别, 原理是什么?</li>
<li>父子组件怎么通信的?</li>
<li>兄弟组件怎么通信的?</li>
<li>生命周期有哪些, 怎么用?</li>
<li>Vue 全家桶都用过哪些?具体怎么用?</li>
</ul>
<h3 id="HTML5-CSS3"><a href="#HTML5-CSS3" class="headerlink" title="HTML5 + CSS3"></a>HTML5 + CSS3</h3><ul>
<li>盒子模型</li>
<li>如何给未知宽高的图片垂直居中对齐? 有几种方法?</li>
<li>移动端的 rem 布局.</li>
<li>前端可以做哪些优化, 或问你 SEO, 基本都问.</li>
<li>清除浮动方式和原理, 基本都问. 几种方式? 原理? 为什么要用伪元素? 具体代码怎么写,为什么这么写?</li>
<li>清除浮动就会涉及到 BFC 的问题.</li>
<li>给你实际页面例子, 让你口述布局或手写实现细节, 可以使用几种方法, 怎么写兼容性好, 拓展性好.</li>
<li>具体 API 哪个 CSS 版本的?</li>
<li>CSS3 新增了哪些 API?</li>
<li>可能问你哪些 API 是 CSS 哪个版本的? 兼容性怎么样.</li>
<li>CSS hack 是什么? 包含什么? 怎么处理兼容性问题?</li>
<li>HTML5 新增了哪些 API? 哪些比较常用? 用来做什么? 实际怎么用?</li>
<li>cookie, session, localStrorage, sessionStorage 区别, 具体怎么用代码去操作? </li>
</ul>
<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><ul>
<li>变量声明提升的问题.</li>
<li>闭包的原理, 闭包的各种题, 基本都问.</li>
<li>DOM2 事件流, 冒泡和捕获问题?</li>
<li>this 指向问题, 一般都是在笔试题里, 拿着问你, 问的比较多.</li>
<li>call 和 apply 区别? 有的还会加问 bind?</li>
<li>jQuery 获取复选框选中状态, 为什么要用 prop 方法?</li>
<li>面向对象编程中的继承问题, 原型链问题在笔试题里比较常见.</li>
<li>jQuery API , 各种操作 DOM 用法, 还有一些新的 API, 这种在不用 3 大框架的公司会问的很详细.</li>
<li>可能有些考算法结构的, 可以了解一下, 一般前端掌握的很少.</li>
<li>Ajax 基本都问, 问的细节可能不同, 比如 get 和 post 有什么区别?</li>
<li>数组的方法 - es6 以下基本都能熟练使用, 应该会加分不少</li>
<li>字符串的方法 - 拼接, 截取, 带些正则</li>
<li>数组去重问的挺多的(解法很多, ES6 有很多简短写法)</li>
<li>ES6 的 Promise , 很多都会问. 如果公司用框架或者你写了, 还会问你 Class.</li>
<li>var, let, const区别, 问的多.</li>
<li>栈和队列结构, 有的会问.</li>
<li>跨域问题: 同源策略, 解决方案, 解决原理(比如 jsonp 的原理), 这里都是高发区.</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>url 解析过程.</li>
<li>缓存的原理.</li>
<li>TCP 3次握手.</li>
<li>HTTP 协议.</li>
<li>看过哪些技术书籍? 可能直接问你书里的东西, 个人觉得至少 2 本以上储备量吧.</li>
</ul>
<h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>问你用过什么技术, 用过哪些插件解决什么问题之类的, 了解一下你的技术栈.</p>
<p>那些开发用的插件和技术名词最好回想, 整理一下, 不要面试的时候蒙了.</p>
<ul>
<li>负责什么模块?</li>
<li>使用到的技术?</li>
<li>遇到过什么难题?</li>
<li>怎么解决的?</li>
<li>工作之外的学习情况? 一般会从侧面了解一下</li>
</ul>
<h3 id="技术部门架构"><a href="#技术部门架构" class="headerlink" title="技术部门架构"></a>技术部门架构</h3><ol>
<li>按照业务线来划分部门, 每个部门配置(运营, 产品, UI, 前端, 服务端, 安卓, ios), 工作效率高, 前端 1-4 人或更多都有可能, 看业务量.</li>
<li>按照技术种类划分部门, 交流成本较高.</li>
<li>恩, 还有可能前端只有 1 或 2 人.</li>
</ol>
<p>技术人员配置主要还是看公司业务量的多寡, 和公司产品类型.</p>
<h3 id="开发平台"><a href="#开发平台" class="headerlink" title="开发平台"></a>开发平台</h3><p>很久没更新了, 今天说说工作中的开发平台.</p>
<p>如果开发的是 App ,那我们针对的是某一个版本号的开发. 推陈出新需要一个过程, 所以就有开发平台这种流程出现.</p>
<p>一个版本从需求讨论, 一直到开发完成上线, 大致经过以下几个过程.</p>
<ol>
<li>需求讨论(技术可行性, 时间需求等)</li>
<li>需求讲解(产品告诉技术我们这次需要多什么)</li>
<li>前后端约定接口形式(一般都有通用形式的要求, 但具体参数和返回值需要具体商议)</li>
<li>前端, 后端, 客户端分别开发</li>
<li>前后端联调(测试交互功能)</li>
<li>提测(交于QA测试功能)</li>
<li>QA测试(禅道等bug管理平台, bug 指向人修改 bug)</li>
<li>预上线(模拟真实线上环境)</li>
<li>上线(预上线一切正常就可以上线了)</li>
</ol>
<p>这其中涉及到几处环境:</p>
<ul>
<li>研发环境</li>
<li>测试环境</li>
<li>预上线环境</li>
<li>线上环境</li>
</ul>
<p>想理解几套环境的差异, 需要了解 host 这个概念.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">127.0.0.1 www.baidu.com 指向本地</div><div class="line">10.10.10.111 www.baidu.com 指向局域网服务器</div><div class="line">45.23.26.23 www.baidu.com 指向网络独立IP</div></pre></td></tr></table></figure>
<p>host 可以改变域名指向的服务器 IP 地址, 线上的各种网站也是需要在域名控制台配置域名指向的, 所以你想办网站, 不只是要有域名, 还要有一台拥有独立 IP 地址的服务器.</p>
<p>我们通过切换 host 的指向, 改变资源(js,css,images)的指向, 可以自由切换到不同的服务器上去, 基于这一点, 形成开发平台的概念.</p>
<p>想看网上域名指向何处, 可以搜一下关键词 <code>ping</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/avatar.png"
               alt="纪行川" />
          <p class="site-author-name" itemprop="name">纪行川</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">60</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Xing-Chuan" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">纪行川</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

</body>
</html>
